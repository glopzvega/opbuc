{% extends 'base.html' %}

{% load static %}

{% block styles %}
<style>
	
.zone-item
{
	height: 200px;
}	
.videoWrapper
{
	position: relative;
    padding-bottom: 56.25%;    
    height: 0;
    margin-top: -100px;
}
.videoWrapper iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
</style>

{% endblock %}
{% block carousel %}
<div id="video" class="videoWrapper">	
	<iframe class="video-background" width="100%" height="315" src="https://www.youtube.com/embed/7QcSGE6qeIQ?rel=0&amp;controls=0&amp;showinfo=0&amp;loop=1&amp;autoplay=1&amp;html5=1&amp;allowfullscreen=true&amp;wmode=transparent" allow="autoplay; encripted-media" frameborder="0" allowfullscreen></iframe>
</div>
{% endblock %}

{% block content %}

{{ zones }}

<div class="container-fluid">
	
<section id="categorias">

	<div class="row">
		<div class="col text-center">
			<h1>
				¿Qué estás buscando?
			</h1>
			<p>
				A continuación se muestran algúnas categorias con las que podrás encontrar facilmente el lugar que estás buscando.
			</p>				
			<hr class="divider">
		</div>
	</div>
	<div class="row">
		<div class="col-3">
			<h5>Ubicación</h5>
			<hr>
			<div class="list-group">
				<input type="hidden" id="id_zona">	
				{% for zone in zonas %}
				<a href="{{zone.id}}" class="list-group-item list-group-item-action">
					<i class="far fa-square"></i>
					{{ zone.name }}
				</a>	
				{% endfor %}
			</div>
		</div>
		<div class="col-8">
	
			<div class="row">
				{% for row in data %}
					<div class="col-12 col-sm-6" style="padding:0;">
						<div class="zone-item text-center" style="background:url(/media/{{row.photo}}) no-repeat; width: 100%; height: 200px; background-size: 100%;">
							<h2>
								<a href="{% url 'lugares_categoria' row.id %}" class="etiqueta" style="color: white;">
									{{ row.name }}
								</a>
							</h2>
						</div>
					</div>
				{% endfor %}
			</div>

		</div>		
	</div>

</section>

</div>
{% endblock %}

{% block scripts %}

<script>

	$(".list-group-item").on("click", function(e){
		e.preventDefault();		
		let href = "";
		if($(this).hasClass("active"))
		{
			href = "";
			$(this).removeClass("active")
			$(this).find("i.far").removeClass("fa-check-square").addClass("fa-square");		
		}
		else
		{
			href = $(this).attr("href");
			$(".list-group-item").removeClass("active");
			$(".list-group-item").find("i.far").removeClass("fa-check-square").addClass("fa-square");

			$(this).addClass("active")
			$(this).find("i.far").removeClass("fa-square").addClass("fa-check-square");	
		}
		
		$("#id_zona").val(href);
	});

	$(".etiqueta").on("click", function(e){
		e.preventDefault();
		let url = $(this).attr("href");
		let id_zona = $("#id_zona").val()
		if(id_zona != "")
			url += "?zone="+id_zona
		location.href = url;
	});

</script>

{% endblock %}